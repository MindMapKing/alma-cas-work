#############################################################################
# See https://mirzlab.github.io/2017/07/16/cas5-oidc-provider/ for an example
#############################################################################

cas.server.name=https://ma24088.ads.eso.org:8019
cas.server.prefix=https://ma24088.ads.eso.org:8019/cas
cas.adminPagesSecurity.ip=127\.0\.0\.1
spring.profiles.active=int

# disable default authentication
cas.authn.accept.users = 

# CAS cryptographic keys
cas.tgc.crypto.encryption.key=CslPTogPxjpPq7mWVNAkTdMao0kcqvNGAE7ud9my-D0
cas.tgc.crypto.signing.key=hMyYxNo2UbIR3Q-XKKNyg1MWO60kd79LN1p9pd8d-ox9IywDkRwWKLNpLbfHtUmlwgNmmcZVZKyj3zxk51h2iw
cas.webflow.crypto.signing.key=jB9g3KHmT8-xQJYA3Aal7MLNo9EatppeQVc-esOsAMODbGJ93XlA1oZuHrfzRm1gVvyp19cVff7eg61IHcdIvg
cas.webflow.crypto.encryption.key=xl8OosD6b3-5XCB1nLyZ9A

cas.httpWebRequest.header.hsts=false

#################################################
# Spring security
server.port=8019
security.require-ssl=true
# The format used for the keystore 
# server.ssl.key-store-type=PKCS12
# The path to the keystore containing the certificate
server.ssl.key-store=file:${ACSDATA}/config/cas/keystore.p12
# The password used to generate the certificate
server.ssl.key-store-password=changeit
server.ssl.key-password=changeit
# The alias mapped to the certificate
# server.ssl.keyAlias=tomcat

# enable AJP -- see https://en.wikipedia.org/wiki/Apache_JServ_Protocol
cas.server.ajp.enabled=true
cas.server.ajp.port=8019
cas.server.ajp.secure=true

################################################################
# OIDC configuration
cas.authn.oidc.issuer=http://ma24088.ads.eso.org:8019/cas/oidc

# Skew ID tokens in minutes
# cas.authn.oidc.skew=5

cas.authn.oidc.jwksFile=file:${ACSDATA}/config/cas/oidc-keystore.jwks
cas.serviceRegistry.json.location=file:${ACSDATA}/config/cas/services

# cas.authn.oidc.jwksCacheInMinutes=60

# cas.authn.oidc.dynamicClientRegistrationMode=OPEN|PROTECTED

# cas.authn.oidc.subjectTypes=public,pairwise

# Supported scopes
cas.authn.oidc.scopes=openid,profile,profile_full

# Supported claims
# cas.authn.oidc.claims=sub,name,preferred_username,family_name, \
#    given_name,middle_name,given_name,profile, \
#    picture,nickname,website,zoneinfo,locale,updated_at,birthdate, \
#    email,email_verified,phone_number,phone_number_verified,address
cas.authn.oidc.claims=sub,name,preferred_username,family_name, \
	given_name,middle_name,given_name,profile, \
	picture,nickname,website,zoneinfo,locale,updated_at,birthdate, \
	email,email_verified,phone_number,phone_number_verified,address, \
	givenName,lastName,mail,displayName,employeeNumber

# Define custom scopes and claims
# cas.authn.oidc.userDefinedScopes.scope1=cn,givenName,photos,customAttribute
# cas.authn.oidc.userDefinedScopes.scope2=cn,givenName,photos,customAttribute2

# Map fixed claims to CAS attributes
cas.authn.oidc.userDefinedScopes.profile_full=givenName,lastName,mail,zoneinfo
cas.authn.oidc.claimsMap.givenName=firstname
cas.authn.oidc.claimsMap.lastName=lastname
cas.authn.oidc.claimsMap.mail=email
cas.authn.oidc.claimsMap.zoneinfo=roles